#ifndef __FUNCTION_H
#define __FUNCTION_H

/* Includes ------------------------------------------------------------------*/
#include "stm32f4xx.h"
#include "./cc1101/cc1101.h"
#include "./usart/bsp_com_usart.h"
#include "./tim/bsp_basic_tim.h"
#include "./spi/bsp_spi.h"
#include "./fram/bsp_fram.h"
#include "./key/bsp_key.h"
#include "./fsmc/bsp_fsmc.h" 
#include "./rtc/bsp_rtc.h"
#include "./gprs/bsp_gprs.h"
#include "wizchip_conf.h"
#include "loopback.h"
#include "socket.h"
#include "w5500.h"
#include "spi.h"

//#define	ETHERNET_ENABLE

/* Exported types ------------------------------------------------------------*/
/* Exported constants --------------------------------------------------------*/
#define TX              0       // cc1101发送模式
#define RX              1       // cc1101接收模式
#define IDLE          	2       // cc1101空闲模式
#define RFID_SUM    		200   	// RFID标签的总数
#define ACK_LENGTH      27   		// 反馈数据包长度
#define SEND_LENGTH     18			// 发送数据包长度
#define RECV_LENGTH   	19			// 接收数据包长度
#define RECV_TIMEOUT		50000000  			// 接收等待13s
#define SEND_PACKAGE_NUM	200		// 发生数据包数
#define FRAM_DATA_LENGTH	7			// 存储fram数据buffer
/* Exported macro ------------------------------------------------------------*/
extern __IO uint32_t	RecvWaitTime;  	// 接收等待时间
extern __IO uint8_t		RecvFlag;     	// =1接收等待时间结束，=0不处理

/* Exported functions ------------------------------------------------------- */
void MCU_Initial(void);
void RF_Initial(uint8_t addr, uint16_t sync, uint8_t mode);
void System_Initial(void);
void Function_Ctrl(uint8_t *command);
void Check_Assign_RFID(uint8_t *command);
void Check_All_RFID(uint8_t *command);
void Check_Assign_Section_RFID(uint8_t *command);
void Prog_Assign_RFID(uint8_t *command);
void Clear_All_RFID(uint8_t *command);
void RF_ProgPacket(uint8_t *command);
void RF_SendPacket(uint8_t *command);
void RF_SendClearPacket(uint8_t *command);
uint8_t	RF_Acknowledge(void);
void Reply_PC(uint8_t index);
void GetNandFlashAddr(flashInfo* pFlshInfo);
void ChipParametersConfiguration(void);
void NetworkParameterConfiguration(void);
void FRAM_Ctrl(uint8_t *command);
void Init_ID(void);

//uint8_t RFID_init[RFID_SUM][7] = {
//  {1, 0xB9, 0xE6, 0, 0, 0, 1},//1:7:B9E6
//  {2, 0xDB, 0x67, 0, 0, 0, 2},//2:E:DB67
//  {3, 0x0C, 0x8B, 0, 0, 0, 3},//3:15:C8B
//  {4, 0xEB, 0xEC, 0, 0, 0, 4},//4:1C:EBEC
//  {5, 0x4C, 0x4D, 0, 0, 0, 5},//5:23:4C4D
//  {6, 0x9C, 0xA1, 0, 0, 0, 6},//6:2A:9CA1
//  {7, 0xDF, 0xC9, 0, 0, 0, 7},//7:31:DFC9
//  {8, 0xF3, 0x7B, 0, 0, 0, 8},//8:38:F37B
//  {9, 0x42, 0x3F, 0, 0, 0, 9},//9:3F:423F

//  {10, 0x5B, 0xF0, 0, 0, 0, 10},//10:A:46:5BF0
//  {11, 0xDA, 0x8C, 0, 0, 0, 11},//11:B:4D:DA8C
//  {12, 0xFF, 0xA3, 0, 0, 0, 12},//12:C:54:FFA3
//  {13, 0x2F, 0xC5, 0, 0, 0, 13},//13:D:5B:2FC5
//  {14, 0xC0, 0xF7, 0, 0, 0, 14},//14:E:62:C0F7
//  {15, 0x53, 0x04, 0, 0, 0, 15},//15:F:69:5304
//  {16, 0x26, 0x40, 0, 0, 0, 16},//16:10:70:2640
//  {17, 0x38, 0x6E, 0, 0, 0, 17},//17:11:77:386E
//  {18, 0x5C, 0x8B, 0, 0, 0, 18},//18:12:7E:5C8B
//  {19, 0x6C, 0x32, 0, 0, 0, 19},//19:13:85:6C32

//  {20, 0x86, 0x3F, 0, 0, 0, 20},//20:14:8C:863F
//  {21, 0xF6, 0x8D, 0, 0, 0, 21},//21:15:93:F68D
//  {22, 0xE8, 0x1B, 0, 0, 0, 22},//22:16:9A:E81B
//  {23, 0x2F, 0x3B, 0, 0, 0, 23},//23:17:A1:2F3B
//  {24, 0xAB, 0x89, 0, 0, 0, 24},//24:18:A8:AB89
//  {25, 0x57, 0xFD, 0, 0, 0, 25},//25:19:AF:57FD
//  {26, 0x70, 0xF4, 0, 0, 0, 26},//26:1A:B6:70F4
//  {27, 0x83, 0xD0, 0, 0, 0, 27},//27:1B:BD:83D0
//  {28, 0xF8, 0xE5, 0, 0, 0, 28},//28:1C:C4:F8E5
//  {29, 0x2F, 0xD8, 0, 0, 0, 29},//29:1D:CB:2FD8

//  {30, 0x65, 0x47, 0, 0, 0, 30},//30:1E:D2:6547
//  {31, 0x57, 0xC1, 0, 0, 0, 31},//31:1F:D9:57C1
//  {32, 0x08, 0xE1, 0, 0, 0, 32},//32:20:E0:8E1
//  {33, 0x66, 0x95, 0, 0, 0, 33},//33:21:E7:6695
//  {34, 0x9D, 0x10, 0, 0, 0, 34},//34:22:EE:9D10
//  {35, 0x1C, 0xD2, 0, 0, 0, 35},//35:23:F5:1CD2
//  {36, 0x46, 0x46, 0, 0, 0, 36},//36:24:FC:4646
//  {37, 0xC3, 0x33, 0, 0, 0, 37},//37:25:103:C333
//  {38, 0x47, 0xD6, 0, 0, 0, 38},//38:26:10A:47D6
//  {39, 0xD0, 0x66, 0, 0, 0, 39},//39:27:111:D066

//  {40, 0xDD, 0xC0, 0, 0, 0, 40},//40:28:118:DDC0
//  {41, 0x7E, 0x7A, 0, 0, 0, 41},//41:29:11F:7E7A
//  {42, 0x9F, 0x34, 0, 0, 0, 42},//42:2A:126:9F34
//  {43, 0x88, 0x69, 0, 0, 0, 43},//43:2B:12D:8869
//  {44, 0x2E, 0x95, 0, 0, 0, 44},//44:2C:134:2E95
//  {45, 0x24, 0x84, 0, 0, 0, 45},//45:2D:13B:2484
//  {46, 0x0C, 0x7D, 0, 0, 0, 46},//46:2E:142:C7D
//  {47, 0xD4, 0xFC, 0, 0, 0, 47},//47:2F:149:D4FC
//  {48, 0x1C, 0x4B, 0, 0, 0, 48},//48:30:150:1C4B
//  {49, 0x0A, 0x3D, 0, 0, 0, 49},//49:31:157:A3D

//  {50, 0x96, 0x22, 0, 0, 0, 50},//50:32:15E:9622
//  {51, 0x61, 0xE3, 0, 0, 0, 51},//51:33:165:61E3
//  {52, 0xCC, 0x75, 0, 0, 0, 52},//52:34:16C:CC75
//  {53, 0x17, 0xEF, 0, 0, 0, 53},//53:35:173:17EF
//  {54, 0x5B, 0xB0, 0, 0, 0, 54},//54:36:17A:5BB0
//  {55, 0xE8, 0xE5, 0, 0, 0, 55},//55:37:181:E8E5
//  {56, 0x6B, 0x4A, 0, 0, 0, 56},//56:38:188:6B4A
//  {57, 0x45, 0x06, 0, 0, 0, 57},//57:39:18F:4506
//  {58, 0x29, 0x8E, 0, 0, 0, 58},//58:3A:196:298E
//  {59, 0xA7, 0xA1, 0, 0, 0, 59},//59:3B:19D:A7A1

//  {60, 0x60, 0x91, 0, 0, 0, 60},//60:3C:1A4:6091
//  {61, 0xFB, 0x7F, 0, 0, 0, 61},//61:3D:1AB:FB7F
//  {62, 0x78, 0x2B, 0, 0, 0, 62},//62:3E:1B2:782B
//  {63, 0x5E, 0x94, 0, 0, 0, 63},//63:3F:1B9:5E94
//  {64, 0x49, 0xCE, 0, 0, 0, 64},//64:40:1C0:49CE
//  {65, 0xAC, 0x98, 0, 0, 0, 65},//65:41:1C7:AC98
//  {66, 0x85, 0x11, 0, 0, 0, 66},//66:42:1CE:8511
//  {67, 0x08, 0x5E, 0, 0, 0, 67},//67:43:1D5:85E
//  {68, 0x13, 0xC2, 0, 0, 0, 68},//68:44:1DC:13C2
//  {69, 0x1F, 0xE4, 0, 0, 0, 69},//69:45:1E3:1FE4

//  {70, 0x1B, 0x93, 0, 0, 0, 70},//70:46:1EA:1B93
//  {71, 0x23, 0x4B, 0, 0, 0, 71},//71:47:1F1:234B
//  {72, 0x6C, 0xC5, 0, 0, 0, 72},//72:48:1F8:6CC5
//  {73, 0x7F, 0xBC, 0, 0, 0, 73},//73:49:1FF:7FBC
//  {74, 0xA2, 0xB2, 0, 0, 0, 74},//74:4A:206:A2B2
//  {75, 0x6A, 0xE1, 0, 0, 0, 75},//75:4B:20D:6AE1
//  {76, 0x25, 0xB2, 0, 0, 0, 76},//76:4C:214:25B2
//  {77, 0xA1, 0x4D, 0, 0, 0, 77},//77:4D:21B:A14D
//  {78, 0x5E, 0x50, 0, 0, 0, 78},//78:4E:222:5E50
//  {79, 0xDC, 0x40, 0, 0, 0, 79},//79:4F:229:DC40

//  {80, 0x93, 0x20, 0, 0, 0, 80},//80:50:230:9320
//  {81, 0xA5, 0x6C, 0, 0, 0, 81},//81:51:237:A56C
//  {82, 0x93, 0x19, 0, 0, 0, 82},//82:52:23E:9319
//  {83, 0xE1, 0x27, 0, 0, 0, 83},//83:53:245:E127
//  {84, 0x64, 0x20, 0, 0, 0, 84},//84:54:24C:6420
//  {85, 0x6D, 0x11, 0, 0, 0, 85},//85:55:253:6D11
//  {86, 0x6A, 0xE9, 0, 0, 0, 86},//86:56:25A:6AE9
//  {87, 0x96, 0xC3, 0, 0, 0, 87},//87:57:261:96C3
//  {88, 0xB5, 0x2B, 0, 0, 0, 88},//88:58:268:B52B
//  {89, 0x2E, 0xB0, 0, 0, 0, 89},//89:59:26F:2EB0

//  {90, 0x26, 0xD2, 0, 0, 0, 90},//90:5A:276:26D2
//  {91, 0x16, 0x50, 0, 0, 0, 91},//91:5B:27D:1650
//  {92, 0x50, 0xE9, 0, 0, 0, 92},//92:5C:284:50E9
//  {93, 0x30, 0x58, 0, 0, 0, 93},//93:5D:28B:3058
//  {94, 0xA4, 0x40, 0, 0, 0, 94},//94:5E:292:A440
//  {95, 0x75, 0xB8, 0, 0, 0, 95},//95:5F:299:75B8
//  {96, 0xFF, 0xDF, 0, 0, 0, 96},//96:60:2A0:FFDF
//  {97, 0x8E, 0xC7, 0, 0, 0, 97},//97:61:2A7:8EC7
//  {98, 0x15, 0x10, 0, 0, 0, 98},//98:62:2AE:1510
//  {99, 0x59, 0x8E, 0, 0, 0, 99},//99:63:2B5:598E

//  {100, 0x8B, 0x4B, 0, 0, 0, 100},//100:64:2BC:8B4B
//  {101, 0xCF, 0xBF, 0, 0, 0, 101},//101:65:2C3:CFBF
//  {102, 0x91, 0x23, 0, 0, 0, 102},//102:66:2CA:9123
//  {103, 0xE3, 0x54, 0, 0, 0, 103},//103:67:2D1:E354
//  {104, 0x7D, 0x1A, 0, 0, 0, 104},//104:68:2D8:7D1A
//  {105, 0xA2, 0xCC, 0, 0, 0, 105},//105:69:2DF:A2CC
//  {106, 0x79, 0x76, 0, 0, 0, 106},//106:6A:2E6:7976
//  {107, 0xAE, 0xC9, 0, 0, 0, 107},//107:6B:2ED:AEC9
//  {108, 0x62, 0xCB, 0, 0, 0, 108},//108:6C:2F4:62CB
//  {109, 0xBF, 0x68, 0, 0, 0, 109},//109:6D:2FB:BF68

//  {110, 0xCE, 0xE9, 0, 0, 0, 110},//110:6E:302:CEE9
//  {111, 0xDE, 0xAF, 0, 0, 0, 111},//111:6F:309:DEAF
//  {112, 0x9D, 0xC1, 0, 0, 0, 112},//112:70:310:9DC1
//  {113, 0x33, 0xAF, 0, 0, 0, 113},//113:71:317:33AF
//  {114, 0x43, 0x98, 0, 0, 0, 114},//114:72:31E:4398
//  {115, 0xC8, 0x4F, 0, 0, 0, 115},//115:73:325:C84F
//  {116, 0x70, 0x4C, 0, 0, 0, 116},//116:74:32C:704C
//  {117, 0x9E, 0xA2, 0, 0, 0, 117},//117:75:333:9EA2
//  {118, 0x7F, 0xCB, 0, 0, 0, 118},//118:76:33A:7FCB
//  {119, 0x01, 0x46, 0, 0, 0, 119},//119:77:341:146

//  {120, 0x12, 0xFF, 0, 0, 0, 120},//120:78:348:12FF
//  {121, 0x42, 0xF3, 0, 0, 0, 121},//121:79:34F:42F3
//  {122, 0x78, 0x18, 0, 0, 0, 122},//122:7A:356:7818
//  {123, 0x7B, 0x96, 0, 0, 0, 123},//123:7B:35D:7B96
//  {124, 0x2C, 0x32, 0, 0, 0, 124},//124:7C:364:2C32
//  {125, 0xD9, 0xF5, 0, 0, 0, 125},//125:7D:36B:D9F5
//  {126, 0xA0, 0xDE, 0, 0, 0, 126},//126:7E:372:A0DE
//  {127, 0xD1, 0x4D, 0, 0, 0, 127},//127:7F:379:D14D
//  {128, 0xFF, 0xDB, 0, 0, 0, 128},//128:80:380:FFDB
//  {129, 0xAC, 0x4D, 0, 0, 0, 129},//129:81:387:AC4D

//  {130, 0x6C, 0x31, 0, 0, 0, 130},//130:82:38E:6C31
//  {131, 0x25, 0xA5, 0, 0, 0, 131},//131:83:395:25A5
//  {132, 0x36, 0x3F, 0, 0, 0, 132},//132:84:39C:363F
//  {133, 0x49, 0xF6, 0, 0, 0, 133},//133:85:3A3:49F6
//  {134, 0x6E, 0xB4, 0, 0, 0, 134},//134:86:3AA:6EB4
//  {135, 0xE2, 0x39, 0, 0, 0, 135},//135:87:3B1:E239
//  {136, 0x0C, 0xA3, 0, 0, 0, 136},//136:88:3B8:CA3
//  {137, 0xF3, 0xD3, 0, 0, 0, 137},//137:89:3BF:F3D3
//  {138, 0xF1, 0xE0, 0, 0, 0, 138},//138:8A:3C6:F1E0
//  {139, 0x0A, 0x6D, 0, 0, 0, 139},//139:8B:3CD:A6D

//  {140, 0xE6, 0x4E, 0, 0, 0, 140},//140:8C:3D4:E64E
//  {141, 0xCC, 0xCF, 0, 0, 0, 141},//141:8D:3DB:CCCF
//  {142, 0x7E, 0xBF, 0, 0, 0, 142},//142:8E:3E2:7EBF
//  {143, 0xA5, 0x85, 0, 0, 0, 143},//143:8F:3E9:A585
//  {144, 0xC9, 0x96, 0, 0, 0, 144},//144:90:3F0:C996
//  {145, 0x7A, 0x13, 0, 0, 0, 145},//145:91:3F7:7A13
//  {146, 0xBB, 0xC5, 0, 0, 0, 146},//146:92:3FE:BBC5
//  {147, 0x84, 0xDD, 0, 0, 0, 147},//147:93:405:84DD
//  {148, 0x42, 0xE1, 0, 0, 0, 148},//148:94:40C:42E1
//  {149, 0x34, 0x52, 0, 0, 0, 149},//149:95:413:3452

//  {150, 0xF6, 0xB6, 0, 0, 0, 150},//150:96:41A:F6B6
//  {151, 0x22, 0x6B, 0, 0, 0, 151},//151:97:421:226B
//  {152, 0x96, 0x9D, 0, 0, 0, 152},//152:98:428:969D
//  {153, 0x45, 0x00, 0, 0, 0, 153},//153:99:42F:4500
//  {154, 0x15, 0x1B, 0, 0, 0, 154},//154:9A:436:151B
//  {155, 0xDC, 0x44, 0, 0, 0, 155},//155:9B:43D:DC44
//  {156, 0x24, 0xCB, 0, 0, 0, 156},//156:9C:444:24CB
//  {157, 0x11, 0xA2, 0, 0, 0, 157},//157:9D:44B:11A2
//  {158, 0x52, 0x6A, 0, 0, 0, 158},//158:9E:452:526A
//  {159, 0x13, 0xD9, 0, 0, 0, 159},//159:9F:459:13D9

//  {160, 0xF1, 0xB7, 0, 0, 0, 160},//160:A0:460:F1B7
//  {161, 0x96, 0x5A, 0, 0, 0, 161},//161:A1:467:965A
//  {162, 0x63, 0x2A, 0, 0, 0, 162},//162:A2:46E:632A
//  {163, 0xC6, 0x01, 0, 0, 0, 163},//163:A3:475:C601
//  {164, 0x1D, 0x5B, 0, 0, 0, 164},//164:A4:47C:1D5B
//  {165, 0x6B, 0x85, 0, 0, 0, 165},//165:A5:483:6B85
//  {166, 0xF3, 0x78, 0, 0, 0, 166},//166:A6:48A:F378
//  {167, 0x28, 0x95, 0, 0, 0, 167},//167:A7:491:2895
//  {168, 0x1E, 0x20, 0, 0, 0, 168},//168:A8:498:1E20
//  {169, 0xA5, 0xB4, 0, 0, 0, 169},//169:A9:49F:A5B4

//  {170, 0x42, 0xDD, 0, 0, 0, 170},//170:AA:4A6:42DD
//  {171, 0x81, 0x67, 0, 0, 0, 171},//171:AB:4AD:8167
//  {172, 0x26, 0x64, 0, 0, 0, 172},//172:AC:4B4:2664
//  {173, 0xC3, 0xD2, 0, 0, 0, 173},//173:AD:4BB:C3D2
//  {174, 0xC5, 0x87, 0, 0, 0, 174},//174:AE:4C2:C587
//  {175, 0x52, 0x0A, 0, 0, 0, 175},//175:AF:4C9:520A
//  {176, 0x0A, 0x1C, 0, 0, 0, 176},//176:B0:4D0:A1C
//  {177, 0x85, 0xF9, 0, 0, 0, 177},//177:B1:4D7:85F9
//  {178, 0xF6, 0x0B, 0, 0, 0, 178},//178:B2:4DE:F60B
//  {179, 0x16, 0x00, 0, 0, 0, 179},//179:B3:4E5:1600

//  {180, 0x39, 0xD4, 0, 0, 0, 180},//180:B4:4EC:39D4
//  {181, 0xFC, 0x13, 0, 0, 0, 181},//181:B5:4F3:FC13
//  {182, 0x94, 0xD4, 0, 0, 0, 182},//182:B6:4FA:94D4
//  {183, 0x33, 0x0A, 0, 0, 0, 183},//183:B7:501:330A
//  {184, 0x31, 0xB1, 0, 0, 0, 184},//184:B8:508:31B1
//  {185, 0x83, 0xDD, 0, 0, 0, 185},//185:B9:50F:83DD
//  {186, 0xB9, 0x62, 0, 0, 0, 186},//186:BA:516:B962
//  {187, 0x8B, 0x5A, 0, 0, 0, 187},//187:BB:51D:8B5A
//  {188, 0x28, 0x8A, 0, 0, 0, 188},//188:BC:524:288A
//  {189, 0x29, 0x3D, 0, 0, 0, 189},//189:BD:52B:293D

//  {190, 0x4B, 0xDD, 0, 0, 0, 190},//190:BE:532:4BDD
//  {191, 0xD8, 0x30, 0, 0, 0, 191},//191:BF:539:D830
//  {192, 0xF8, 0x83, 0, 0, 0, 192},//192:C0:540:F883
//  {193, 0x24, 0x5A, 0, 0, 0, 193},//193:C1:547:245A
//  {194, 0x04, 0xD1, 0, 0, 0, 194},//194:C2:54E:4D1
//  {195, 0xF3, 0xE1, 0, 0, 0, 195},//195:C3:555:F3E1
//  {196, 0xE6, 0x3D, 0, 0, 0, 196},//196:C4:55C:E63D
//  {197, 0x39, 0xC8, 0, 0, 0, 197},//197:C5:563:39C8
//  {198, 0xA8, 0x44, 0, 0, 0, 198},//198:C6:56A:A844
//  {199, 0xF0, 0x6F, 0, 0, 0, 199},//199:C7:571:F06F

//  {200, 0x95, 0x3B, 0, 0, 0, 200},//200:C8:578:953B

//};

#endif /* __FUNCTION_H */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
